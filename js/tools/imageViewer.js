export default function imageViewer(){let n=!1,a=1,i=!1,s=!1,o=0,l=0,c=0,d=0,m=0;const t=document.querySelector(".image-viewer-container");if(t){const u=t.querySelector("img");if(u){const v=e=>{document.body.style.overflow=e?"hidden":"auto",e?t.classList.add("active"):t.classList.remove("active")};let r=0;var e=e=>{i&&e.stopPropagation(),i=!1,u.style.cursor="grab"};u.addEventListener("wheel",e=>{e.preventDefault();var t=u.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top,n=n-t.width/2,r=r-t.height/2,t=a;a+=-.001*e.deltaY,t<(a=Math.min(Math.max(.8,a),4))?(d-=n*(a-t),m-=r*(a-t)):(d=0,m=0),u.style.transform=`translate(${d}px, ${m}px) scale(${a})`},{passive:!1}),u.addEventListener("mousedown",e=>{e.preventDefault(),i=!0,l=e.clientX,c=e.clientY,u.style.cursor="grabbing"},{passive:!1}),u.addEventListener("mousemove",e=>{var t,n;!i||(t=(new Date).getTime())-r<100||(r=t,t=e.clientX-l,n=e.clientY-c,d+=t,m+=n,l=e.clientX,c=e.clientY,u.style.transform=`translate(${d}px, ${m}px) scale(${a})`,s=!0)},{passive:!1}),u.addEventListener("mouseup",e,{passive:!1}),u.addEventListener("mouseleave",e,{passive:!1}),t.addEventListener("click",e=>{s||(n=!1,v(n),a=1,d=0,m=0,u.style.transform=`translate(${d}px, ${m}px) scale(${a})`),s=!1});const g=document.querySelectorAll(".markdown-body img, .masonry-item img, #shuoshuo-content img"),y=e=>{"Escape"===e.key&&n&&(n=!1,v(n),a=1,d=0,m=0,u.style.transform=`translate(${d}px, ${m}px) scale(${a})`,document.removeEventListener("keydown",y))};0<g.length&&(g.forEach((e,t)=>{e.addEventListener("click",()=>{o=t,n=!0,v(n),u.src=e.src,document.addEventListener("keydown",y)})}),document.addEventListener("keydown",t=>{if(n){if("ArrowUp"===t.key||"ArrowLeft"===t.key)o=(o-1+g.length)%g.length;else{if("ArrowDown"!==t.key&&"ArrowRight"!==t.key)return;o=(o+1)%g.length}t=g[o];let e=t.src;t.hasAttribute("lazyload")&&(e=t.getAttribute("data-src"),t.src=e,t.removeAttribute("lazyload")),u.src=e}}))}else console.warn("Target image not found in image viewer container. Exiting imageViewer function.")}else console.warn("Image viewer container not found. Exiting imageViewer function.")}